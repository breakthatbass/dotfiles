#!/bin/bash

##############################################################################
#  usb - check what's connected in the usb ports.                            #
#                                                                            #
#  this is mostly to be used for opening a UART communication                #
#  port between a PC and a micrcontroller.                                   #
#                                                                            #
#  usage: usb                                                                #
#                                                                            #
#  taylor gamache - 11-13-2021                                               #
##############################################################################

if [ $# -gt 0 ];
then
  echo "usage: usb"
  exit
fi

if [[ "$OSTYPE" == "darwin"* ]];
then
  
  usbs=$((ls /dev/cu.usb* | awk '{print $1}') 2>/dev/null)
  
  if [[ !$usb ]]; then
    echo 'no devices detected'
    exit 0
  fi
  
  echo ${#usbs[@]}
  for i in $usbs
  do
    echo $i
  done

elif [[ "$OSTYPE" == "linux-gnu"* ]];
then
 
  # todo: error check here like above 
  ls /dev/ttyACMO
  echo
  ls /dev/serial/by-id
  echo
  ls /dev/serial/by-path

else
  echo "not supported"
fi
