#!/bin/bash

##############################################################################
#  usb - check what's connected in the usb ports.                            #
#                                                                            #
#  this is mostly to be used for opening a UART communication                #
#  port between a PC and a micrcontroller.                                   #
#                                                                            #
#  usage: usb                                                                #
#                                                                            #
#  taylor gamache - 11-13-2021                                               #
##############################################################################

if [ $# -gt 0 ];
then
  echo "usage: usb"
  exit
fi

if [[ "$OSTYPE" == "darwin"* ]];
then
  
  usbs=`ls /dev/cu.usb* | awk '{print $1}'`
  
  if [[ !$usbs ]]; then
    echo
    echo 'no devices detected'
    exit 0
  fi
  
  echo ${#usbs[@]}
  for i in $usbs
  do
    echo $i
  done

elif [[ "$OSTYPE" == "linux-gnu"* ]];
then
 
  usb_id=`ls /dev/serial/by-id`
  usb_path=`ls /dev/serial/by_path`

  if [[ !$usb_id ]] ; then
    echo
    echo 'no devices detected'
    exit 0
  fi

  echo $usb_id
  echo
  echo $usb_path
  echo

else
  echo "not supported"
fi
