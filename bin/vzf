#!/bin/bash
#
# use fzf to search and preview files before opeing in vim or vs code
#
# usage: vzf ['--vim', '--vs'] (no arg opens vim)

OS=$(uname)

if [[ "$#" == 0 ]];
then
  # no args, search for files and preview with fzf
    vim -o  "$(fzf --preview 'bat --style=numbers --color=always --line-range :500 {}')"
# command was used wrong
elif [[ "$1" == "--vs" ]];
then
    if [ "$OS" = "Linux" ];
    then
        echo "todo..."
    else
        open -a 'visual studio code' "$(fzf --preview 'bat --style=numbers --color=always --line-range :500 {}')"
    fi
elif [[ "$1" == "--vim" ]];
then
    vim -o  "$(fzf --preview 'bat --style=numbers --color=always --line-range :500 {}')"
fi
